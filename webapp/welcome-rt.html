<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Roaccutane Tracker ‚Äî –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root{
      --bg:#0B1220; --card:#121C2E; --border:#1F2A3C;
      --text-high:#F3F7FF; --text-mid:#C7D2FE; --text-low:#93A3BF;
      --primary:#14B8A6;
    }
    *{box-sizing:border-box}
    body{
      margin:0; color:var(--text-high);
      background:radial-gradient(100% 60% at 20% 0%, rgba(20,184,166,.10), transparent 60%), radial-gradient(100% 60% at 80% 10%, rgba(96,165,250,.10), transparent 60%), var(--bg);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Manrope,Helvetica,Arial;
      min-height:100dvh; display:grid; place-items:center;
    }
    .wrap{width:min(1100px,94vw); padding:24px}
    .card{position:relative; overflow:hidden; background:var(--card); border:1px solid var(--border); border-radius:24px; padding:28px 28px 22px; box-shadow:0 16px 48px rgba(0,0,0,.40);}
    .glow{position:absolute; inset:0; pointer-events:none; background:radial-gradient(120% 80% at 10% 0%, rgba(20,184,166,.18), transparent 50%), radial-gradient(120% 80% at 90% 20%, rgba(96,165,250,.18), transparent 60%);}
    .chip{position:absolute; top:max(12px,env(safe-area-inset-top)); right:max(12px,env(safe-area-inset-right)); display:inline-flex; gap:6px; padding:8px 12px; border-radius:999px; font-size:13px; color:var(--text-mid); background:rgba(255,255,255,.06); border:1px solid var(--border); box-shadow:0 10px 20px rgba(0,0,0,.06);}
    .row{display:grid; grid-template-columns:180px 1fr; gap:24px; align-items:start}
    .stage{position:relative; width:180px; height:180px; border-radius:18px; border:1px solid var(--border); background:linear-gradient(160deg,#0E1726,#101b2b); display:grid; place-items:center}
    .pill{width:96px; height:40px} .pill .left{fill:#fff} .pill .right{fill:#14b8a6}
    .ring{position:absolute; width:132px; height:132px; border-radius:999px; border:3px solid rgba(94,234,212,.35); animation:r 2.8s ease-out infinite}
    @keyframes r{0%{transform:scale(.85);opacity:.8}80%{transform:scale(1.15);opacity:.08}100%{opacity:0}}
    h1{margin:0 0 6px; font-weight:800; font-size:40px; letter-spacing:.2px}
    p.lead{margin:10px 0 14px; color:var(--text-mid); font-size:20px}

    /* –í–æ–ø—Ä–æ—Å + –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–æ–ª–∏ (–¥–∏–∑–∞–π–Ω –∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω–µ) */
    .question{color:var(--text-mid); font-size:18px; margin:10px 0 10px; display:flex; align-items:center; gap:18px; flex-wrap:wrap;}
    .vline{width:2px; height:36px; border-radius:2px; background:#1F2A3C; opacity:.7;}
    .role-options{display:flex; gap:28px; align-items:center; flex-wrap:wrap;}
    .radio{ position:relative; display:inline-flex; align-items:center; gap:10px; padding:10px 14px; border-radius:12px;
             border:1px solid var(--border); background:transparent; color:var(--text-mid); cursor:pointer; user-select:none; }
    .radio input{ position:absolute; inset:0; opacity:0; }
    .radio .dot{ width:14px; height:14px; border-radius:999px; border:2px solid var(--text-mid); display:inline-block; position:relative; }
    .radio input:checked ~ .dot{ border-color:transparent; }
    .radio input:checked ~ .dot::after{ content:''; position:absolute; inset:-2px; border-radius:999px; background:linear-gradient(135deg,#22c55e,#06b6d4,#8b5cf6); }
    .radio input:checked ~ .txt{ color:var(--text-high); font-weight:800; }
    .radio:hover{ border-color:var(--text-mid); }

    /* –ù–∏–∑: –∫–Ω–æ–ø–∫–∏ */
    .footer{display:flex; align-items:center; gap:12px; margin-top:16px; flex-wrap:wrap;}
    .start{appearance:none; border:none; background:var(--primary); color:#001016; font-weight:800; padding:12px 18px; border-radius:14px; box-shadow:0 8px 24px rgba(20,184,166,.25); cursor:pointer;}
    .theme{margin-left:auto} .theme button{height:46px; padding:0 18px; border-radius:14px; font-weight:800; background-image: linear-gradient(135deg,#22c55e 0%,#06b6d4 60%,#8b5cf6 100%); color:#061116; border:0;}

    @media (max-width:820px){
      h1{font-size:28px}
      .row{grid-template-columns:150px 1fr}
      .stage{width:150px;height:150px}
    }
    @media (max-width:560px){
      .row{grid-template-columns:1fr; gap:16px}
      .stage{width:120px;height:120px; justify-self:start}
      h1{font-size:26px}
      p.lead{font-size:16px}
      .footer .start, .theme button{width:100%}
      .theme{margin-left:0; width:100%}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="glow"></div>
      <span class="chip">TG WebApp –≥–æ—Ç–æ–≤</span>

      <div class="row">
        <div class="stage">
          <div class="ring"></div>
          <svg class="pill" viewBox="0 0 200 86" xmlns="http://www.w3.org/2000/svg">
            <defs><clipPath id="capsule"><rect x="0" y="0" rx="43" ry="43" width="200" height="86"/></clipPath></defs>
            <g clip-path="url(#capsule)">
              <rect x="0" y="0" width="100" height="86" fill="#ffffff"/>
              <rect x="100" y="0" width="100" height="86" fill="#14b8a6"/>
              <rect x="94" y="0" width="12" height="86" fill="#0E1726" opacity=".45"/>
            </g>
            <rect x="0" y="0" rx="43" ry="43" width="200" height="86" fill="none" stroke="rgba(255,255,255,.65)" stroke-width="2"/>
          </svg>
        </div>

        <div>
          <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Roaccutane Tracker</h1>
          <p class="lead">–ü–æ–º–æ–∂–µ–º –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø—Ä–æ–π—Ç–∏ –∫—É—Ä—Å: —Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –¥–æ–∑—ã, —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∏ –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ –ø—Ä–∏—ë–º.</p>

          <div class="question">
            <span>–í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç –ª–∏—Ü–∞ <b>–ø–∞—Ü–∏–µ–Ω—Ç–∞</b> –∏–ª–∏ <b>–≤—Ä–∞—á–∞</b>?</span>
            <span class="vline" aria-hidden="true"></span>
            <div class="role-options" role="radiogroup" aria-label="–í—ã–±–æ—Ä —Ä–æ–ª–∏">
              <label class="radio">
                <input type="radio" name="role" id="roleDoctor" value="doctor">
                <span class="dot"></span>
                <span class="txt">ü©∫ <b>–í—Ä–∞—á</b></span>
              </label>
              <label class="radio">
                <input type="radio" name="role" id="rolePatient" value="patient">
                <span class="dot"></span>
                <span class="txt">üôÇ <b>–ü–∞—Ü–∏–µ–Ω—Ç</b></span>
              </label>
            </div>
          </div>

          <div class="footer">
            <button id="startBtn" class="start">–ù–∞—á–∞—Ç—å</button>
            <div class="theme"><button id="themeToggle">üå§ <b>–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</b></button></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const tg = window.Telegram?.WebApp || null;
    tg?.ready?.(); tg?.expand?.();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫ –∏–∑ localStorage
    (function(){
      const saved = localStorage.getItem('rt_role') || 'patient';
      const doc = document.getElementById('roleDoctor');
      const pat = document.getElementById('rolePatient');
      if(saved === 'doctor') doc.checked = true; else pat.checked = true;
      document.documentElement.setAttribute('data-role', saved);
      document.querySelectorAll('input[name="role"]').forEach(el=>{
        el.addEventListener('change', () => {
          const role = document.querySelector('input[name="role"]:checked')?.value || 'patient';
          try{ localStorage.setItem('rt_role', role); }catch(_ ){}
          document.documentElement.setAttribute('data-role', role);
          tg?.HapticFeedback?.impactOccurred?.('light');
        });
      });
    })();

   // –°—Ç–∞—Ä—Ç: —Ä–æ—É—Ç–∏–Ω–≥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ + —É–≤–∞–∂–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤
  document.getElementById('startBtn').addEventListener('click', () => {
    const qs = location.search || '';

    const role =
      document.querySelector('input[name="role"]:checked')?.value
      || (document.getElementById('roleSwitch')?.checked ? 'patient' : 'doctor')
      || localStorage.getItem('derma_role')
      || localStorage.getItem('rt_role')
      || 'patient';

    if (role === 'doctor') {
      // –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞—Ö–æ–¥ –≤—Ä–∞—á–∞ ‚Üí —Å—Ä–∞–∑—É –≤ –∫–∞–±–∏–Ω–µ—Ç
      const next = (localStorage.getItem('rt_doctor_done') === '1')
        ? './doctor-cabinet-mint-rose.html'
        : './doctor-onboarding-mint-rose.html';
      location.replace(next + qs);
      return;
    }

    // –ü–∞—Ü–∏–µ–Ω—Ç: –ø–µ—Ä–≤—ã–π –∑–∞—Ö–æ–¥ ‚Üí —Å–Ω–∞—á–∞–ª–∞ warnings (–ø—Ä–∏–º–µ–º —Å–æ–≥–ª–∞—Å–∏–µ), –ø–æ—Ç–æ–º profile.
    const patientDone = localStorage.getItem('rt_patient_done') === '1';
    if (patientDone) {
      location.replace('./main-dark.html' + qs);
    } else {
      try { localStorage.setItem('derma_next', 'profile'); } catch(_) {}
      location.replace('./warnings.html' + qs);
    }
  }, { once: true });

    // –°–º–µ–Ω–∞ —Ç–µ–º—ã
    (function(){
      const btn = document.getElementById('themeToggle');
      if(!btn) return;
      const qs = location.search || '';
      btn.addEventListener('click', ()=> {
        try{ localStorage.setItem('rt_theme','light'); }catch(_ ){}
        location.replace('./welcome-rt-light.html'+ qs);
      });
    })();
  </script>
</body>
</html>
